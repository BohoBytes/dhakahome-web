{{define "partials/header.html"}}
<!-- Header -->
<header class="relative z-[999]">
  <div
    class="mx-auto max-w-[85rem] px-4 py-3 flex items-center justify-between gap-4"
  >
    <!-- Logo left -->
    <a href="/" class="flex items-center gap-2">
      <img src="/assets/icons/logo.svg" class="w-[80px] h-[80px] md:w-[100px] md:h-[100px] lg:w-[130px] lg:h-[130px]" alt="DhakaHome" />
    </a>

    <!-- Right side: Menu + Login button -->
    <div class="flex items-center gap-2 md:gap-[24px]">
      <!-- Mobile Hamburger Menu Button -->
      <button
        id="mobile-menu-toggle"
        class="lg:hidden p-2 rounded-md text-[#F44335] hover:bg-[#F3F3F3] transition-colors"
        aria-label="Toggle menu"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>

      {{- $active := .ActivePage -}}
      {{- $selectedType := "" -}}
      {{- with .Search }}{{- $selectedType = .SelectedType -}}{{- end -}}

      <!-- Desktop Navigation menu -->
      <nav
        class="hidden lg:flex relative z-[1000] bg-[#F3F3F3] rounded-[10px] overflow-visible items-center gap-[28px] px-[20px] pr-[22px] py-[11px] h-[50px]"
        style="box-shadow: 0px 4px 16.1px rgba(0, 0, 0, 0.15)"
      >
        <a
          href="/"
          class="relative text-[20px] leading-[26px] whitespace-nowrap {{if eq $active `home`}}text-[#F44335] font-medium border-b-2 border-[#F44335] pb-[2px]{{else}}text-[#ACACAC] font-normal{{end}}"
          style="font-family: 'Poppins', sans-serif;"
          >Home</a
        >

        <!-- Properties with dropdown -->
        <div
          class="relative flex items-center"
          data-property-menu
          data-selected-type="{{$selectedType}}"
        >
          <a
            href="/properties"
            class="relative text-[20px] leading-[26px] whitespace-nowrap {{if eq $active `properties`}}text-[#F44335] font-medium border-b-2 border-[#F44335] pb-[2px]{{else}}text-[#ACACAC] font-normal{{end}}"
            style="font-family: 'Poppins', sans-serif; font-weight: 400;"
            >Properties</a
          >
          <!-- Dropdown arrow -->
          <button
            type="button"
            class="ml-[10px] flex items-center justify-center w-[20px] h-[10px] focus:outline-none"
            aria-expanded="false"
            aria-haspopup="true"
            data-property-trigger
            aria-label="Toggle property menu"
          >
            <svg
              width="10"
              height="20"
              viewBox="0 0 10 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              style="transform: rotate(270deg);"
            >
              <path
                d="M10 1.50743L5 10L0 1.50743L0.8875 -2.49281e-07L5 6.98514L9.1125 -3.49949e-07L10 1.50743Z"
                fill="{{if eq $active `properties`}}#F44335{{else}}#ACACAC{{end}}"
              />
            </svg>
          </button>
          <!-- Dropdown panel -->
          <div
            data-property-dropdown
            class="hidden absolute left-1/2 -translate-x-1/2 top-full mt-[14px] w-[170px] bg-[#f3f3f3] border border-[#cacaca] rounded-[10px] shadow-[0px_4px_16.1px_rgba(0,0,0,0.15)] overflow-hidden z-[1001]"
          >
            <div class="flex flex-col divide-y divide-[#d4d4d4]">
              <a
                href="/properties?type=Residential"
                data-property-option
                data-type="residential"
                class="px-4 py-3 text-[20px] leading-[28px] text-[#acacac] hover:bg-white hover:text-[#f44335]"
                style="font-family: 'Poppins', sans-serif;"
              >
                Residential
              </a>
              <a
                href="/properties?type=Commercial"
                data-property-option
                data-type="commercial"
                class="px-4 py-3 text-[20px] leading-[28px] text-[#acacac] hover:bg-white hover:text-[#f44335]"
                style="font-family: 'Poppins', sans-serif;"
              >
                Commercial
              </a>
              <a
                href="/properties?type=Hostel"
                data-property-option
                data-type="hostel"
                class="px-4 py-3 text-[20px] leading-[28px] text-[#acacac] hover:bg-white hover:text-[#f44335]"
                style="font-family: 'Poppins', sans-serif;"
              >
                Hostel
              </a>
              <a
                href="/properties?type=Plot"
                data-property-option
                data-type="land"
                class="px-4 py-3 text-[20px] leading-[28px] text-[#acacac] hover:bg-white hover:text-[#f44335]"
                style="font-family: 'Poppins', sans-serif;"
              >
                Land
              </a>
            </div>
          </div>
        </div>

        <!-- Our Hotels -->
        <a
          href="/hotels"
          class="relative text-[20px] leading-[26px] whitespace-nowrap {{if eq $active `hotels`}}text-[#F44335] font-medium border-b-2 border-[#F44335] pb-[2px]{{else}}text-[#ACACAC] font-normal{{end}}"
          style="font-family: 'Poppins', sans-serif;"
          >Our Hotels</a
        >

        <!-- FAQs -->
        <a
          href="/faq"
          class="relative text-[20px] leading-[26px] whitespace-nowrap {{if eq $active `faq`}}text-[#F44335] font-medium border-b-2 border-[#F44335] pb-[2px]{{else}}text-[#ACACAC] font-normal{{end}}"
          style="font-family: 'Poppins', sans-serif;"
          >FAQs</a
        >

        <!-- About Us -->
        <a
          href="/about-us"
          class="relative text-[20px] leading-[26px] whitespace-nowrap {{if eq $active `about`}}text-[#F44335] font-medium border-b-2 border-[#F44335] pb-[2px]{{else}}text-[#ACACAC] font-normal{{end}}"
          style="font-family: 'Poppins', sans-serif;"
          >About Us</a
        >

        <!-- Contact Us -->
        <a
          href="/contact-us"
          class="relative text-[20px] leading-[26px] whitespace-nowrap {{if eq $active `contact`}}text-[#F44335] font-medium border-b-2 border-[#F44335] pb-[2px]{{else}}text-[#ACACAC] font-normal{{end}}"
          style="font-family: 'Poppins', sans-serif; font-weight: 400;"
          >Contact Us</a
        >
      </nav>

      <!-- Tablet Navigation menu (simplified) -->
      <nav
        class="hidden md:flex lg:hidden relative z-[1000] bg-[#F3F3F3] rounded-[10px] overflow-visible items-center gap-[16px] px-[14px] pr-[16px] py-[9px] h-[44px]"
        style="box-shadow: 0px 4px 16.1px rgba(0, 0, 0, 0.15)"
      >
        <a
          href="/"
          class="relative text-[16px] leading-[22px] whitespace-nowrap {{if eq $active `home`}}text-[#F44335] font-medium border-b-2 border-[#F44335] pb-[2px]{{else}}text-[#ACACAC] font-normal{{end}}"
          style="font-family: 'Poppins', sans-serif;"
          >Home</a
        >

        <!-- Properties with dropdown -->
        <div
          class="relative flex items-center"
          data-property-menu
          data-selected-type="{{$selectedType}}"
        >
          <a
            href="/properties"
            class="relative text-[16px] leading-[22px] whitespace-nowrap {{if eq $active `properties`}}text-[#F44335] font-medium border-b-2 border-[#F44335] pb-[2px]{{else}}text-[#ACACAC] font-normal{{end}}"
            style="font-family: 'Poppins', sans-serif; font-weight: 400;"
            >Properties</a
          >
          <!-- Dropdown arrow -->
          <button
            type="button"
            class="ml-[8px] flex items-center justify-center w-[16px] h-[8px] focus:outline-none"
            aria-expanded="false"
            aria-haspopup="true"
            data-property-trigger
            aria-label="Toggle property menu"
          >
            <svg
              width="8"
              height="16"
              viewBox="0 0 10 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              style="transform: rotate(270deg);"
            >
              <path
                d="M10 1.50743L5 10L0 1.50743L0.8875 -2.49281e-07L5 6.98514L9.1125 -3.49949e-07L10 1.50743Z"
                fill="{{if eq $active `properties`}}#F44335{{else}}#ACACAC{{end}}"
              />
            </svg>
          </button>
          <!-- Dropdown panel -->
          <div
            data-property-dropdown
            class="hidden absolute left-1/2 -translate-x-1/2 top-full mt-[12px] w-[160px] bg-[#f3f3f3] border border-[#cacaca] rounded-[10px] shadow-[0px_4px_16.1px_rgba(0,0,0,0.15)] overflow-hidden z-[1001]"
          >
            <div class="flex flex-col divide-y divide-[#d4d4d4]">
              <a
                href="/properties?type=Residential"
                data-property-option
                data-type="residential"
                class="px-4 py-2.5 text-[18px] leading-[24px] text-[#acacac] hover:bg-white hover:text-[#f44335]"
                style="font-family: 'Poppins', sans-serif;"
              >
                Residential
              </a>
              <a
                href="/properties?type=Commercial"
                data-property-option
                data-type="commercial"
                class="px-4 py-2.5 text-[18px] leading-[24px] text-[#acacac] hover:bg-white hover:text-[#f44335]"
                style="font-family: 'Poppins', sans-serif;"
              >
                Commercial
              </a>
              <a
                href="/properties?type=Hostel"
                data-property-option
                data-type="hostel"
                class="px-4 py-2.5 text-[18px] leading-[24px] text-[#acacac] hover:bg-white hover:text-[#f44335]"
                style="font-family: 'Poppins', sans-serif;"
              >
                Hostel
              </a>
              <a
                href="/properties?type=Plot"
                data-property-option
                data-type="land"
                class="px-4 py-2.5 text-[18px] leading-[24px] text-[#acacac] hover:bg-white hover:text-[#f44335]"
                style="font-family: 'Poppins', sans-serif;"
              >
                Land
              </a>
            </div>
          </div>
        </div>

        <!-- Our Hotels -->
        <a
          href="/hotels"
          class="relative text-[16px] leading-[22px] whitespace-nowrap {{if eq $active `hotels`}}text-[#F44335] font-medium border-b-2 border-[#F44335] pb-[2px]{{else}}text-[#ACACAC] font-normal{{end}}"
          style="font-family: 'Poppins', sans-serif;"
          >Our Hotels</a
        >

        <!-- FAQs -->
        <a
          href="/faq"
          class="relative text-[16px] leading-[22px] whitespace-nowrap {{if eq $active `faq`}}text-[#F44335] font-medium border-b-2 border-[#F44335] pb-[2px]{{else}}text-[#ACACAC] font-normal{{end}}"
          style="font-family: 'Poppins', sans-serif;"
          >FAQs</a
        >

        <!-- About Us -->
        <a
          href="/about-us"
          class="relative text-[16px] leading-[22px] whitespace-nowrap {{if eq $active `about`}}text-[#F44335] font-medium border-b-2 border-[#F44335] pb-[2px]{{else}}text-[#ACACAC] font-normal{{end}}"
          style="font-family: 'Poppins', sans-serif;"
          >About Us</a
        >

        <!-- Contact Us -->
        <a
          href="/contact-us"
          class="relative text-[16px] leading-[22px] whitespace-nowrap {{if eq $active `contact`}}text-[#F44335] font-medium border-b-2 border-[#F44335] pb-[2px]{{else}}text-[#ACACAC] font-normal{{end}}"
          style="font-family: 'Poppins', sans-serif;"
          >Contact Us</a
        >
      </nav>

      <!-- Mobile/Tablet Menu Overlay -->
      <div
        id="mobile-menu"
        class="hidden fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden"
        onclick="document.getElementById('mobile-menu').classList.add('hidden')"
      >
        <div
          class="absolute right-0 top-0 h-full w-[280px] bg-white shadow-lg overflow-y-auto"
          onclick="event.stopPropagation()"
        >
          <div class="p-4 flex justify-between items-center border-b">
            <span class="text-[#F44335] font-medium text-lg">Menu</span>
            <button
              id="mobile-menu-close"
              class="p-2 rounded-md text-gray-600 hover:bg-gray-100"
              aria-label="Close menu"
            >
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
          <nav class="flex flex-col p-4 gap-4">
            <a
              href="/"
              class="text-[#F44335] text-[18px] font-medium leading-[26px] py-2 border-b border-gray-200"
              style="font-family: 'Poppins', sans-serif; font-weight: 500;"
              >Home</a
            >
            <div class="border-b border-gray-200 pb-2">
              <button
                type="button"
                class="flex w-full items-center justify-between text-[18px] leading-[26px] {{if eq $active `properties`}}text-[#F44335] font-medium{{else}}text-[#ACACAC] font-normal{{end}}"
                style="font-family: 'Poppins', sans-serif; font-weight: 400;"
                data-mobile-property-toggle
                aria-expanded="false"
                aria-controls="mobile-property-menu"
              >
                <span>Properties</span>
                <svg class="w-4 h-4 transition-transform" viewBox="0 0 10 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="transform: rotate(-90deg);">
                  <path d="M10 1.50743L5 10L0 1.50743L0.8875 -2.49281e-07L5 6.98514L9.1125 -3.49949e-07L10 1.50743Z" fill="currentColor" />
                </svg>
              </button>
              <div id="mobile-property-menu" class="mt-2 pl-2 space-y-2 hidden" data-mobile-property-panel>
                <a
                  href="/properties?type=Residential"
                  class="block text-[16px] leading-[22px] text-[#ACACAC] hover:text-[#F44335]"
                  style="font-family: 'Poppins', sans-serif; font-weight: 400;"
                  >Residential</a
                >
                <a
                  href="/properties?type=Commercial"
                  class="block text-[16px] leading-[22px] text-[#ACACAC] hover:text-[#F44335]"
                  style="font-family: 'Poppins', sans-serif; font-weight: 400;"
                  >Commercial</a
                >
                <a
                  href="/properties?type=Hostel"
                  class="block text-[16px] leading-[22px] text-[#ACACAC] hover:text-[#F44335]"
                  style="font-family: 'Poppins', sans-serif; font-weight: 400;"
                  >Hostel</a
                >
                <a
                  href="/properties?type=Plot"
                  class="block text-[16px] leading-[22px] text-[#ACACAC] hover:text-[#F44335]"
                  style="font-family: 'Poppins', sans-serif; font-weight: 400;"
                  >Land</a
                >
              </div>
            </div>
            <a
              href="/hotels"
              class="{{if eq $active `hotels`}}text-[#F44335] font-medium{{else}}text-[#ACACAC] font-normal{{end}} text-[18px] leading-[26px] py-2 border-b border-gray-200"
              style="font-family: 'Poppins', sans-serif;"
              >Our Hotels</a
            >
            <a
              href="/faq"
              class="{{if eq $active `faq`}}text-[#F44335] font-medium{{else}}text-[#ACACAC] font-normal{{end}} text-[18px] leading-[26px] py-2 border-b border-gray-200"
              style="font-family: 'Poppins', sans-serif;"
              >FAQs</a
            >
            <a
              href="/about-us"
              class="{{if eq $active `about`}}text-[#F44335] font-medium{{else}}text-[#ACACAC] font-normal{{end}} text-[18px] leading-[26px] py-2 border-b border-gray-200"
              style="font-family: 'Poppins', sans-serif; font-weight: 400;"
              >About Us</a
            >
            <a
              href="/contact-us"
              class="{{if eq $active `contact`}}text-[#F44335] font-medium{{else}}text-[#ACACAC] font-normal{{end}} text-[18px] leading-[26px] py-2 border-b border-gray-200"
              style="font-family: 'Poppins', sans-serif; font-weight: 400;"
              >Contact Us</a
            >
          </nav>
        </div>
      </div>

      <!-- Login button -->
      <div class="flex items-center gap-3">
        <a
          href="/login"
          class="inline-flex justify-center items-center gap-2 px-[14px] py-[8px] md:px-[18px] md:py-[10px] lg:px-[20px] lg:py-[11px] rounded-[10px] border-2 border-[#F44335] text-[#F44335] text-[15px] md:text-[16px] lg:text-[18px] font-medium leading-[22px] md:leading-[24px] lg:leading-[24px] hover:bg-[#F44335] hover:text-white transition-colors whitespace-nowrap"
          style="font-family: 'Poppins', sans-serif; font-weight: 500;"
        >
          <span class="hidden sm:inline">Login</span>
          <span class="sm:hidden">Log</span>
        </a>
      </div>
    </div>
  </div>
</header>

<script>
  // Mobile menu toggle functionality
  document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.getElementById('mobile-menu-toggle');
    const menuClose = document.getElementById('mobile-menu-close');
    const mobileMenu = document.getElementById('mobile-menu');
    const propertyMenus = document.querySelectorAll('[data-property-menu]');
    const mobilePropertyToggle = document.querySelector('[data-mobile-property-toggle]');
    const mobilePropertyPanel = document.querySelector('[data-mobile-property-panel]');

    if (menuToggle) {
      menuToggle.addEventListener('click', function() {
        mobileMenu.classList.remove('hidden');
      });
    }

    if (menuClose) {
      menuClose.addEventListener('click', function() {
        mobileMenu.classList.add('hidden');
      });
    }

    const normalizeType = (val) => {
      const clean = (val || '').toString().trim().toLowerCase();
      if (clean === 'plot') return 'land';
      return clean;
    };

    propertyMenus.forEach((menu) => {
      const trigger = menu.querySelector('[data-property-trigger]');
      const dropdown = menu.querySelector('[data-property-dropdown]');
      const options = dropdown ? dropdown.querySelectorAll('[data-property-option]') : [];
      const activeType = normalizeType(menu.dataset.selectedType);
      let closeTimer;

      if (activeType) {
        options.forEach((option) => {
          const optType = normalizeType(option.dataset.type);
          if (optType === activeType) {
            option.classList.remove('text-[#acacac]');
            option.classList.add('text-[#f44335]', 'font-medium', 'bg-white');
          }
        });
      }

      const openMenu = () => {
        if (!dropdown) return;
        clearTimeout(closeTimer);
        dropdown.classList.remove('hidden');
        trigger?.setAttribute('aria-expanded', 'true');
      };

      const closeMenu = () => {
        if (!dropdown) return;
        dropdown.classList.add('hidden');
        trigger?.setAttribute('aria-expanded', 'false');
      };

      trigger?.addEventListener('click', (event) => {
        event.preventDefault();
        if (dropdown.classList.contains('hidden')) {
          openMenu();
        } else {
          closeMenu();
        }
      });

      menu.addEventListener('mouseenter', openMenu);
      menu.addEventListener('mouseleave', () => {
        clearTimeout(closeTimer);
        closeTimer = setTimeout(closeMenu, 120);
      });

      document.addEventListener('click', (event) => {
        if (!menu.contains(event.target)) {
          closeMenu();
        }
      });
    });

    if (mobilePropertyToggle && mobilePropertyPanel) {
      mobilePropertyToggle.addEventListener('click', () => {
        const isOpen = !mobilePropertyPanel.classList.contains('hidden');
        mobilePropertyPanel.classList.toggle('hidden');
        mobilePropertyToggle.setAttribute('aria-expanded', (!isOpen).toString());
        const chevron = mobilePropertyToggle.querySelector('svg');
        if (chevron) {
          chevron.style.transform = isOpen ? 'rotate(-90deg)' : 'rotate(0deg)';
        }
      });
    }
  });
</script>
{{end}}
